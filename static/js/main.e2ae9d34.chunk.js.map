{"version":3,"sources":["images/logo/mesto-logo.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ImagePopup.js","components/ConfirmPopup.js","utils/api.js","components/App.js","index.js"],"names":["Header","className","src","logo","alt","CurrentUserContext","React","createContext","Card","props","currentUser","useContext","isOwnCard","card","owner","_id","isLiked","likes","some","i","cardDeleteButtonClassName","cardLikeButtonClassName","onClick","onCardClick","name","link","onCardDeleteRequest","aria-label","onCardLike","length","Main","avatar","onEditAvatar","about","onEditProfile","onAddPlace","cards","map","Footer","PopupWithForm","isOpen","noValidate","onSubmit","title","children","type","buttonText","onClose","EditProfilePopup","useState","setName","description","setDescription","useEffect","evt","preventDefault","onUpdateUser","id","placeholder","required","minLength","maxLength","value","onChange","target","EditAvatarPopup","avatarRef","useRef","onUpdateAvatar","current","ref","role","aria-live","AddPlacePopup","setLink","ImagePopup","ConfirmPopup","api","options","this","_url","baseUrl","_headers","headers","res","ok","json","Promise","reject","status","data","fetch","method","body","JSON","stringify","then","_handleOriginalResponse","deleteLike","setLike","all","getUserInfo","getCards","authorization","App","isEditProfilePopupOpen","setEditProfilePopupOpen","isAddPlacePopupOpen","setAddPlacePopupOpen","isEditAvatarPopupOpen","setEditAvatarPopupOpen","isImagePopupOpen","setImagePopupOpen","isConfirmPopupOpen","setIsConfirmPopupOpen","cardForDelete","setCardForDelete","selectedCard","setSelectedCard","setCurrentUser","setCards","closeAllPopups","getInitialData","userData","cardsData","err","console","log","handleEscapeClose","key","document","addEventListener","removeEventListener","Provider","changeLikeCardStatus","newCard","newCards","currentCard","setUserInfo","setUserAvatar","postCard","deleteCard","filter","elem","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.e2ae9d34.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/mesto-logo.a307e1c4.svg\";","import React from 'react';\nimport logo from '../images/logo/mesto-logo.svg';\n\nfunction Header() {\n  return (\n    <header className=\"header\">\n      <img className=\"header__logo\" src={logo} alt=\"логотип сайта\" />\n    </header>\n  )\n}\n\nexport default Header;\n","import React from 'react';\n\nexport const CurrentUserContext = React.createContext();\n","import React from 'react';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction Card(props) {\n\n  const currentUser = React.useContext(CurrentUserContext);\n\n  const isOwnCard = props.card.owner._id === currentUser._id;\n  const isLiked = props.card.likes.some(i => i._id === currentUser._id);\n\n  const cardDeleteButtonClassName = `${isOwnCard ? 'photos__delete-button photos__delete-button_visible' : 'photos__delete-button photos__delete-button_hidden'}`\n  const cardLikeButtonClassName = `${isLiked ? 'photos__like-button photos__like-button_liked' : 'photos__like-button'}`\n\n  function handleCardClick() {\n    props.onCardClick(props.card);\n  }\n\n  function handleLikeClick() {\n    props.onCardLike(props.card)\n  }\n\n  function handleDeleteRequest() {\n    props.onCardDeleteRequest(props.card)\n  }\n\n  return (\n    <li className=\"photos__card\">\n      <figure className=\"photos__figure\">\n        <img onClick={handleCardClick} alt={`Фотография ${props.card.name}`} src={props.card.link} className=\"photos__image\" />\n        <figcaption className=\"photos__figcaption\">{props.card.name}</figcaption>\n      </figure>\n      <button onClick={handleDeleteRequest} className={cardDeleteButtonClassName} aria-label=\"удалить фотографию\"></button>\n      <div className=\"photos__like-container\">\n        <button onClick={handleLikeClick} className={cardLikeButtonClassName} aria-label=\"поставить лайк\"></button>\n        <span className=\"photos__like-count\">{props.card.likes.length}</span>\n      </div>\n    </li>\n  )\n}\n\nexport default Card;\n","import React from 'react';\nimport Card from './Card';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction Main(props) {\n\n  const currentUser = React.useContext(CurrentUserContext);\n\n  return (\n    <main>\n        <section className=\"profile\">\n          <div className=\"profile__container-info\">\n            <div className=\"profile__container-avatar\">\n              <img alt={`Аватар пользователя ${currentUser.name}`} src={currentUser.avatar} className=\"profile__avatar\" />\n              <button\n                className=\"profile__avatar-edit-button\"\n                aria-label=\"открыть форму обновления аватара профиля\"\n                onClick={props.onEditAvatar}\n              />\n            </div>\n            <div className=\"profile__bio\">\n              <div className=\"profile__info\">\n                <h1 className=\"profile__name\">{currentUser.name}</h1>\n                <p className=\"profile__caption\">{currentUser.about}</p>\n              </div>\n              <button\n                className=\"profile__edit-button button-open-form\"\n                aria-label=\"редактировать профиль\"\n                onClick={props.onEditProfile}\n              />\n            </div>\n          </div>\n          <button\n            className=\"profile__add-button button-open-form\"\n            aria-label=\"добавить фотографии\"\n            onClick={props.onAddPlace}\n          />\n        </section>\n        <section className=\"photos\">\n          <ul className=\"photos__list\">\n            {props.cards.map(card =>\n              <Card\n                key={card._id}\n                card={card}\n                onCardClick={props.onCardClick}\n                onCardLike={props.onCardLike}\n                onCardDeleteRequest={props.onCardDeleteRequest}\n              />\n            )}\n          </ul>\n        </section>\n      </main>\n  )\n}\n\nexport default Main;\n","import React from 'react';\n\nfunction Footer() {\n  return (\n    <footer className=\"footer\">\n      <p className=\"footer__author\">&copy; Mesto Russia</p>\n    </footer>\n  )\n}\n\nexport default Footer;\n","import React from 'react';\n\nfunction PopupWithForm(props) {\n  return (\n    <div className={`popup popup_type_${props.name} ${props.isOpen ? 'popup_opened' : ''}`}>\n      <div className=\"popup__container\">\n        <form\n          className=\"form\"\n          name={props.name}\n          noValidate\n          onSubmit={props.onSubmit}\n        >\n        <h3 className=\"form__header\">{props.title}</h3>\n          <fieldset className=\"form__fieldset\">\n            {props.children}\n            <button type=\"submit\" className=\"form__save-button\">{props.buttonText}</button>\n          </fieldset>\n          <button onClick={props.onClose} type=\"reset\" className=\"popup__close-button\" aria-label=\"закрыть форму\"></button>\n        </form>\n      </div>\n    </div>\n  )\n}\n\nexport default PopupWithForm;\n","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\n\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction EditProfilePopup(props) {\n\n  const currentUser = React.useContext(CurrentUserContext);\n\n  const [name, setName] = React.useState('');\n  const [description, setDescription] = React.useState('');\n\n  function handleChangeName(evt) {\n    setName(evt.target.value);\n  }\n\n  function hanldeChangeDescription(evt) {\n    setDescription(evt.target.value);\n  }\n\n  function handleSubmit(evt) {\n    evt.preventDefault();\n    props.onUpdateUser({\n      name: name,\n      about: description,\n    });\n  }\n\n  React.useEffect(() => {\n    setName(currentUser.name);\n    setDescription(currentUser.about);\n  }, [currentUser]);\n\n  return (\n    <PopupWithForm\n      name=\"profile\"\n      title=\"Редактировать профиль\"\n      buttonText=\"Сохранить\"\n      isOpen={props.isOpen}\n      onClose={props.onClose}\n      onSubmit={handleSubmit}\n    >\n      <input\n        className=\"form__input\"\n        type=\"text\"\n        id=\"profile-name\"\n        aria-label=\"имя\"\n        placeholder=\"Имя\"\n        name=\"name\"\n        required\n        minLength=\"2\"\n        maxLength=\"40\"\n        value={name || \"\"}\n        onChange={handleChangeName}\n      />\n      <span className='form__input-error' id='profile-name-error'></span>\n      <input\n        className=\"form__input\"\n        type=\"text\"\n        id=\"profile-about\"\n        aria-label=\"подпись\"\n        placeholder=\"Подпись\"\n        name=\"about\"\n        required\n        minLength=\"2\"\n        maxLength=\"200\"\n        value={description || \"\"}\n        onChange={hanldeChangeDescription}\n      />\n      <span className='form__input-error' id='profile-about-error'></span>\n    </PopupWithForm>\n  )\n}\n\nexport default EditProfilePopup;\n","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\n\nfunction EditAvatarPopup(props) {\n\n  const avatarRef = React.useRef('');\n\n  function handleSubmit(evt) {\n    evt.preventDefault();\n    props.onUpdateAvatar({\n      avatar: avatarRef.current.value,\n    });\n  }\n\n  return (\n    <PopupWithForm\n      name=\"avatar\"\n      title=\"Обновить аватар\"\n      buttonText=\"Сохранить\"\n      isOpen={props.isOpen}\n      onClose={props.onClose}\n      onSubmit={handleSubmit}\n    >\n      <input\n        className=\"form__input\"\n        type=\"url\"\n        id=\"avatar-url\"\n        aria-label=\"ссылка\"\n        placeholder=\"Ссылка на картинку\"\n        name=\"url\"\n        required\n        ref={avatarRef}\n      />\n      <span className='form__input-error' id='avatar-url-error' role=\"status\" aria-live=\"polite\"></span>\n    </PopupWithForm>\n  )\n}\n\nexport default EditAvatarPopup;\n","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\n\nfunction AddPlacePopup(props) {\n\n  const [name, setName] = React.useState('');\n  const [link, setLink] = React.useState('');\n\n  function handleChangeName(evt) {\n    setName(evt.target.value);\n  }\n\n  function handleChangeLink(evt) {\n    setLink(evt.target.value);\n  }\n\n  function handleSubmit(evt) {\n    evt.preventDefault(evt);\n    props.onAddPlace({\n      name: name,\n      link: link,\n    })\n  }\n\n  return (\n    <PopupWithForm\n      name=\"photo\"\n      title=\"Новое место\"\n      buttonText=\"Создать\"\n      isOpen={props.isOpen}\n      onClose={props.onClose}\n      onSubmit={handleSubmit}\n    >\n      <input\n        className=\"form__input\"\n        type=\"text\"\n        id=\"photo-title\"\n        aria-label=\"подпись\"\n        placeholder=\"Название\"\n        name=\"title\"\n        required\n        minLength=\"1\"\n        maxLength=\"30\"\n        value={name}\n        onChange={handleChangeName}\n      />\n      <span className='form__input-error' id='photo-title-error' role=\"status\" aria-live=\"polite\"></span>\n      <input\n        className=\"form__input\"\n        type=\"url\"\n        id=\"photo-url\"\n        aria-label=\"ссылка\"\n        placeholder=\"Ссылка на картинку\"\n        name=\"url\"\n        required\n        value={link}\n        onChange={handleChangeLink}\n      />\n      <span className='form__input-error' id='photo-url-error' role=\"status\" aria-live=\"polite\"></span>\n    </PopupWithForm>\n  )\n}\n\nexport default AddPlacePopup;\n","import React from 'react';\n\nfunction ImagePopup(props) {\n  return (\n    <div className={`popup popup-photos ${props.card && props.isOpen ? 'popup_opened' : ''}`}>\n      <div className=\"popup__container popup-photos__container\">\n        <figure className=\"photos__figure popup-photos__figure\">\n          <img alt={`Фотография ${props.card.name}`} src={`${props.card.link}`} className=\"popup-photos__image\" />\n          <figcaption className=\"popup-photos__figcaption\">{props.card.name}</figcaption>\n        </figure>\n        <button onClick={props.onClose} className=\"popup__close-button\" aria-label=\"закрыть просмотр фотографии\" />\n      </div>\n    </div>\n  )\n}\n\nexport default ImagePopup;\n","import React from 'react';\n\nimport PopupWithForm from './PopupWithForm';\n\nfunction ConfirmPopup(props) {\n  return (\n    <PopupWithForm\n      name=\"confirm\"\n      title={props.title}\n      buttonText={props.buttonText}\n      isOpen={props.isOpen}\n      onClose={props.onClose}\n      onSubmit={props.onSubmit}\n    >\n    </PopupWithForm>\n  )\n}\n\nexport default ConfirmPopup;\n","class Api {\n  constructor(options) {\n    this._url = options.baseUrl;\n    this._headers = options.headers;\n  }\n\n  _handleOriginalResponse(res) {\n    if (!res.ok) {\n      return Promise.reject(`Error: ${res.status}`);\n    }\n    return res.json();\n  }\n\n  setUserAvatar(data) {\n    return fetch(`${this._url}/users/me/avatar`, {\n      method: 'PATCH',\n      headers: this._headers,\n      body: JSON.stringify({\n        avatar: data.avatar\n      })\n    }).then(this._handleOriginalResponse)\n  }\n\n  changeLikeCardStatus(id, isLiked) {\n    if (isLiked) {\n      return this.deleteLike(id);\n    } else {\n      return this.setLike(id);\n    }\n  }\n\n  deleteLike(id) {\n    return fetch(`${this._url}/cards/likes/${id}`, {\n      method: 'DELETE',\n      headers: this._headers,\n    }).then(this._handleOriginalResponse)\n  }\n\n  setLike(id) {\n    return fetch(`${this._url}/cards/likes/${id}`, {\n      method: 'PUT',\n      headers: this._headers,\n    }).then(this._handleOriginalResponse)\n  }\n\n  deleteCard(id) {\n    return fetch(`${this._url}/cards/${id}`, {\n      method: 'DELETE',\n      headers: this._headers\n    }).then(this._handleOriginalResponse)\n  }\n\n  postCard(data) {\n    return fetch(`${this._url}/cards`, {\n      method: 'POST',\n      headers: this._headers,\n      body: JSON.stringify({\n        name: data.name,\n        link: data.link\n      })\n    }).then(this._handleOriginalResponse)\n  }\n\n  setUserInfo(data) {\n    return fetch(`${this._url}/users/me`, {\n      method: 'PATCH',\n      headers: this._headers,\n      body: JSON.stringify({\n        name: data.name,\n        about: data.about\n      })\n    }).then(this._handleOriginalResponse)\n  }\n\n  getInitialData() {\n    return Promise.all([this.getUserInfo(), this.getCards()]);\n  }\n\n  getCards() {\n    return fetch(`${this._url}/cards`, {\n      method: 'GET',\n      headers: this._headers\n    }).then(this._handleOriginalResponse)\n  }\n\n  getUserInfo() {\n    return fetch(`${this._url}/users/me`, {\n      method: 'GET',\n      headers: this._headers\n    }).then(this._handleOriginalResponse)\n  }\n}\n\nconst api = new Api({\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-16',\n  headers: {\n    authorization: 'ff425bea-a4ea-4692-b47e-32fb337d2063',\n    'Content-Type': 'application/json'\n  }\n});\n\nexport default api;\n","import React from 'react';\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\nimport EditProfilePopup from './EditProfilePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport AddPlacePopup from './AddPlacePopup';\nimport PopupWithForm from './PopupWithForm';\nimport ImagePopup from './ImagePopup';\nimport ConfirmPopup from './ConfirmPopup';\nimport api from '../utils/api';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\n\nfunction App() {\n\n  const [isEditProfilePopupOpen, setEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = React.useState(false);\n  const [isImagePopupOpen, setImagePopupOpen] = React.useState(false);\n  const [isConfirmPopupOpen, setIsConfirmPopupOpen] = React.useState(false);\n\n  const [cardForDelete, setCardForDelete] = React.useState({})\n\n  const [selectedCard, setSelectedCard] = React.useState({});\n\n  const [currentUser, setCurrentUser] = React.useState({});\n\n  const [cards, setCards] = React.useState([]);\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n    api.changeLikeCardStatus(card._id, isLiked)\n      .then(\n        (newCard) => {\n          const newCards = cards.map((currentCard) => currentCard._id === card._id ? newCard : currentCard)\n          setCards(newCards);\n        },\n        (err) => {\n          console.log(err);\n        }\n      )\n  }\n\n  function handleCardDelete(evt) {\n    evt.preventDefault();\n    api.deleteCard(cardForDelete._id)\n      .then(\n        () => {\n          const newCards = cards.filter((elem) => elem !== cardForDelete);\n          setCards(newCards);\n          closeAllPopups();\n        },\n        (err) => {\n          console.log(err);\n        }\n      )\n  }\n\n  React.useEffect(() => {\n    api.getInitialData()\n      .then(\n        (data) => {\n          const [userData, cardsData] = data;\n          setCards(cardsData);\n          setCurrentUser(userData);\n        },\n        (err) => {\n          console.log(err);\n        }\n      )\n  }, [])\n\n  function handleAddPlaceSubmit(data) {\n    api.postCard(data)\n      .then(\n        (newCard) => {\n          setCards([newCard, ...cards]);\n          closeAllPopups();\n        },\n        (err) => {\n          console.log(err);\n        }\n      )\n  }\n\n  function handleUpdateAvatar(data) {\n    api.setUserAvatar(data)\n      .then(\n        (data) => {\n          setCurrentUser(data);\n          closeAllPopups();\n        },\n        (err) => {\n          console.log(err);\n        }\n      )\n  }\n\n  function handleUpdateUser(data) {\n    api.setUserInfo(data)\n      .then(\n        (data) => {\n          setCurrentUser(data);\n          closeAllPopups();\n        },\n        (err) => {\n          console.log(err);\n        }\n      )\n  }\n\n  function handleEditProfilePopupOpen() {\n    setEditProfilePopupOpen(!isEditProfilePopupOpen);\n  }\n\n  function handleAddPlacePopupOpen() {\n    setAddPlacePopupOpen(!isAddPlacePopupOpen);\n  }\n\n  function handleEditAvatarPopupOpen() {\n    setEditAvatarPopupOpen(!isEditAvatarPopupOpen);\n  }\n\n  function closeAllPopups() {\n    setEditProfilePopupOpen(false);\n    setAddPlacePopupOpen(false);\n    setEditAvatarPopupOpen(false);\n    setImagePopupOpen(false);\n    setIsConfirmPopupOpen(false);\n    setSelectedCard({});\n  }\n\n  React.useEffect(() => {\n    function handleEscapeClose(evt) {\n      if (evt.key === 'Escape') {\n        closeAllPopups()\n      }\n    }\n\n    document.addEventListener('keyup', handleEscapeClose);\n\n    return () => {\n      document.removeEventListener('keyup', handleEscapeClose);\n    }\n  }, [])\n\n  function handleCardClick(card) {\n    setSelectedCard(card);\n    setImagePopupOpen(true);\n  }\n\n  function handleCardDeleteRequest(card) {\n    setCardForDelete(card);\n    setIsConfirmPopupOpen(true);\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <Header />\n      <Main\n        cards={cards}\n        onCardLike={handleCardLike}\n        onCardDeleteRequest={handleCardDeleteRequest}\n        onEditProfile={handleEditProfilePopupOpen}\n        onAddPlace={handleAddPlacePopupOpen}\n        onEditAvatar={handleEditAvatarPopupOpen}\n        onCardClick={handleCardClick}\n      />\n      <Footer />\n      <EditProfilePopup\n        isOpen={isEditProfilePopupOpen}\n        onClose={closeAllPopups}\n        onUpdateUser={handleUpdateUser}\n      />\n      <EditAvatarPopup\n        isOpen={isEditAvatarPopupOpen}\n        onClose={closeAllPopups}\n        onUpdateAvatar={handleUpdateAvatar}\n      />\n      <AddPlacePopup\n        isOpen={isAddPlacePopupOpen}\n        onClose={closeAllPopups}\n        onAddPlace={handleAddPlaceSubmit}\n      />\n      <ImagePopup\n        isOpen={isImagePopupOpen}\n        card={selectedCard}\n        onClose={closeAllPopups}\n      />\n      <ConfirmPopup\n        isOpen={isConfirmPopupOpen}\n        onClose={closeAllPopups}\n        onSubmit={handleCardDelete}\n        title=\"Вы уверены?\"\n        buttonText=\"Да\"\n      />\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\nimport './index.css';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}